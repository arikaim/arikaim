{%- macro languagesList(selected,attributes) %}
{% set items = loadData("Language") %}
<div class="ui fluid search selection dropdown {{ attributes.class }}" {{ attributes.id|attr("id") }}>    
    <input name="{{ attributes.name }}" type="hidden" value="{{ selected }}">
    <i class="dropdown icon"></i>   
    <div class="default text">{{ attributes.label }}</div>
    <div class="menu">   
    {% for item in items %}
        <div class="item" data-value="{{ item.uuid }}"><i class="flag {{ item.country_code|lower }}"></i>{{ item.title }}</div>      
    {% endfor %}
    </div>
</div>
{%  endmacro languagesList -%}

{%- macro languages(selected,label,field_name,field_id,class) %}
{% set items = loadData("Language") %}
{% if field_id is null %}
{% set field_id = field_name %}
{% endif %}
<div class="ui fluid search selection dropdown {{ class }}" {{ field_id|attr("id") }}>    
    <input name="{{ field_name }}" type="hidden" value="{{ selected }}">
    <i class="dropdown icon"></i>   
    <div class="default text">{{ label }}</div>
    <div class="menu">   
    {% for item in items %}
        <div class="item" data-value="{{ item.code }}"><i class="flag {{ item.country_code|lower }}"></i>{{ item.title }}</div>      
    {% endfor %}
    </div>
</div>
{%  endmacro languages -%}

{%- macro languageMenu(options,attributes) %}
{% set current_language = getCurrentLanguage() %}
{% set items = loadData("Language","status = 1","`default` DESC,position") %}
<div class="ui icon inline top right pointing dropdown {{ class }}" id="language_menu">      
    <i class="flag {{ current_language.country_code }}"></i>
    {% if options.show_title == true and current_language != null %}      
        {{ current_language.title }}
    {% endif %}
    <div class="ui mini vertical menu">  
    {% if attributes.title != "" %} 
        <div class="ui header">{{ attributes.title }}</div>
    {% endif %}
    {% for item in items %}
        <div class="item {{ item.code|ifthen(current_language,'active') }}" data-value="{{ item.code }}">
            <i class="flag {{ item.country_code|lower }}"></i>
            {% if options.show_native_title == true %}
                {{ item.native_title }}
            {% else %}
                {{ item.title }}
            {% endif %}
        </div>      
    {% endfor %}
    </div>
</div>
{%  endmacro languageMenu -%}
